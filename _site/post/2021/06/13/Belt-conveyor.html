<!DOCTYPE html>

<html>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<!--
  The above 2 meta tags *must* come first in the <head>
  to consistently ensure proper document rendering.
  Any other head element should come *after* these tags.
 -->
<title>Home</title>
<!-- Set the base URL for all relative URLs within the document -->
<base href="http://localhost:4000/">

<!--
  Allows control over where resources are loaded from.
  Place as early in the <head> as possible, as the tag  
  only applies to resources that are declared after it.
-->

<!-- Short description of the document (limit to 150 characters) -->
<!-- This content *may* be used as a part of search engine results. -->
<meta name="description" content="">

<!-- Control the behavior of search engine crawling and indexing -->
<meta name="robots" content="index,follow"><!-- All Search Engines -->
<meta name="googlebot" content="index,follow"><!-- Google Specific -->

<!-- Verify website ownership -->
<meta name="google-site-verification" content=""><!-- Google Search Console -->
<meta name="yandex-verification" content=""><!-- Yandex Webmasters -->
<meta name="msvalidate.01" content=""><!-- Bing Webmaster Center -->
<meta name="alexaVerifyID" content=""><!-- Alexa Console -->
<meta name="p:domain_verify" content=""><!-- Pinterest Console-->
<meta name="norton-safeweb-site-verification" content=""><!-- Norton Safe Web -->

<!-- Allows control over how referrer information is passed -->
<meta name="referrer" content="no-referrer">

<!-- Disable automatic detection and formatting of possible phone numbers -->
<meta name="format-detection" content="telephone=true">

<!-- Completely opt out of DNS prefetching by setting to "off" -->
<meta http-equiv="x-dns-prefetch-control" content="on">

<!-- Geo tags -->
<!-- meta name="ICBM" content="latitude, longitude"-->
<!-- meta name="geo.position" content="latitude;longitude"-->
<!-- meta name="geo.region" content="country[-state]"><Country code (ISO 3166-1): mandatory, state code (ISO 3166-2): optional; eg. content="US" / content="US-NY" -->
<!-- meta name="geo.placename" content="city/town"><eg. content="New York City" -->

<!-- Link to an external CSS file -->
<link href="https://fonts.googleapis.com/css2?family=Parisienne&family=Courgette&family=Lobster&family=Pacifico&family=Yellowtail&family=Noto+Sans+JP:wght@400;900&family=Poppins:wght@500&family=Righteous&display=swap" rel="stylesheet">

<link rel="stylesheet" href="/css/main.css">
<!-- BootStrap CDN --> 
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
<script src="https://kit.fontawesome.com/32a2b2a489.js" crossorigin="anonymous"></script>

<script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0"></script> 

<!--  GIT TALK CDN  for comment system -->
<!--
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
<script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script> -->


<!-- Provides information about an author or another person -->
<link rel="me" href="mailto:josecarlosyn@gmail.com">
<link rel="me" href="sms:+">

<!-- Open Search -->
<!-- link rel="search" href="/open-search.xml" type="application/opensearchdescription+xml" title="Search Title" -->

<!-- Feeds -->
<!-- link rel="alternate" href="https://feeds.feedburner.com/example" type="application/rss+xml" title="RSS" -->
<!-- link rel="alternate" href="https://example.com/feed.atom" type="application/atom+xml" title="Atom 0.3" -->

<!-- For IE 10 and below -->
<!-- Place favicon.ico in the root directory - no tag necessary -->
<link rel="apple-touch-icon" sizes="180x180" href="/assets/img/icons/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/assets/img/icons/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/assets/img/icons/favicon-16x16.png">
<link rel="mask-icon" href="/assets/img/icons/safari-pinned-tab.svg" color="#5bbad5">

<meta property="fb:app_id" content="">
<meta property="og:url" content="/post/2021/06/13/Belt-conveyor.html">
<meta property="og:type" content="website">
<meta property="og:title" content="Hand written character recognition in any direction on a conveyor belt.">
<meta property="og:image" content="http://placehold.it/750X300?text=Header+Image">
<meta property="og:image:alt" content="">
<meta property="og:description" content="Hand written character recognition in any direction on a conveyor belt.">
<meta property="og:site_name" content="Handwritten character recognition">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Jose">

<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="@">
<meta name="twitter:creator" content="@">
<meta name="twitter:url" content="/post/2021/06/13/Belt-conveyor.html">
<meta name="twitter:title" content="Hand written character recognition in any direction on a conveyor belt.">
<meta name="twitter:description" content="Hand written character recognition in any direction on a conveyor belt.">
<meta name="twitter:image" content="http://placehold.it/750X300?text=Header+Image">
<meta name="twitter:image:alt" content="">

<!-- Used for adding in-document CSS -->



<!-- JavaScript & No-JavaScript tags -->

<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous"></script>
<!--
<script>
    $(document).ready(function() {
        $(".toast").toast('show');
    });
</script> -->

<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js"></script>

<noscript>
  <!-- No JS alternative -->
</noscript>
  <body>
    
<nav class="navbar navbar-expand-lg glowing-border mb-4" style="font-family:Poppins;background-color:#10292e;">
  <a class="navbar-brand" href="/index.html"><h4 style="font-family:Noto Sans JP;font-weight:600;color:#149f98;">Home</h4></a>
  <button class="navbar-toggler text-black" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
    <i class="fas fa-caret-down"></i>
  </button>
  <div class="collapse navbar-collapse" id="navbarSupportedContent">
    <ul class="navbar-nav mr-auto">
        
              <li class="nav-item">
                  <a href="about.html" class="nav-link" style="font-family:Poppins;color:#149f98;">About</a>
              </li>
        
              <li class="nav-item">
                  <a href="access.html" class="nav-link" style="font-family:Poppins;color:#149f98;">Portfolio</a>
              </li>
        
              <li class="nav-item">
                  <a href="/assets/pdf/resume.pdf" class="nav-link" style="font-family:Poppins;color:#149f98;">Resume</a>
              </li>
        
              <li class="nav-item">
                  <a href="mailto:josecarlosyn@gmail.com" class="nav-link" style="font-family:Poppins;color:#149f98;">Contact me!</a>
              </li>
        
    </ul>
    <ul class="navbar-nav  justify-content-end">
      <li class="nav-item">
        
<!-- Displays Social Media Icons based on _config.yml settings -->
<span style="color:#CCCCCC;">
    <i> &nbsp;&nbsp; </i>
    
    
        <a href="https://github.com/josecyn">
        <span style="color: #CCCCCC;">
            <i class="fab fa-github-square fa-lg"></i></a>
        </span>
    
    
        <a href="https://www.linkedin.com/in/josecarlosyn">
        <span style="color: #CCCCCC;">
            <i class="fab fa-linkedin fa-lg"></i></a>
        </span>
    
    
    
    
     
    <i> &nbsp;&nbsp; </i>
</span>

      </li>
    </ul>
  </div>
</nav>

    <div class="container">
      
      <div class="card border-0">
          <div class="card-body">
            <p class="card-text">
                



<div class="blogcard card-2 mb-4 mt-4" style="width: 100%;">
  <div class="card-body">
    <h5 class="card-title text-center" style="font-size:20px;">computer vision</h5>
    <h5 class="card-title text-center" style="font-size:36px;font-weight:700;">Handwritten character recognition</h5>
    <h6 class="card-subtitle text-center" style="font-size:15px;">Author: Jose | Published 2021-06-13 15:49:00 +0900</h6>
    <div class="row mx-auto">
   <div class="col-md-4 mx-auto">
      <div class="card mb-4 mt-0 mb-0 border-0">
         <div class="card-body text-center">
            <div class="row mb-0">
               <div class="col border-right mb-0">
                  <a href="https://facebook.com/sharer/sharer.php?u=http://localhost:4000//post/2021/06/13/Belt-conveyor.html">
                  <i class="fab fa-facebook-f"></i>
                  <span class="text-muted" style="font-size:14px;">Share</span>
                  </a>
               </div>
               <div class="col border-right mb-0">
                  <a href="https://twitter.com/intent/tweet/?text=Handwritten character recognition&amp;url=http://localhost:4000//post/2021/06/13/Belt-conveyor.html">
                  <i class="fab fa-twitter animate__animated animate__tada"></i>
                  <span class="text-muted" style="font-size:14px;">Tweet</span>
                  </a>
               </div>
               <div class="col border-right mb-0">
                  <a href="mailto:someone@yoursite.com?&subject=Handwritten character recognition&body=Hand written character recognition in any direction on a conveyor belt.">
                  <i class="fas fa-envelope"></i>
                  <span class="text-muted" style="font-size:14px;">Email</span>
                  </a>
               </div>
               <div class="col mb-0">
                  <a href="https://reddit.com/submit/?url=http://localhost:4000//post/2021/06/13/Belt-conveyor.html&amp;resubmit=true&amp;title=Handwritten character recognition">
                  <i class="fab fa-reddit-alien"></i>
                  <span class="text-muted" style="font-size:14px;">Post</span>
                  </a>
               </div>
            </div>
         </div>
      </div>
   </div>
</div>
  </div>
</div>

<div class="card border-0" style="width: 100%;">
  <div class="card-body">
    <p class="card-text"><h3 id="introduction">Introduction</h3>

<p>In this project I created a demo of handwritten character recognition.</p>

<p>In the team we had a previous experience working on a problem like this, and I decided to showcase
that solution.</p>

<p>The idea of this demo is to use a robot arm and a belt conveyor to simulate a industrial environment where 
this technology could be used. The robot arm picks up a box with handwritten characters and places it on the belt conveyor.
A camera located next to the belt, is recording video all the time. Using deep learning models the text on the side
of the boxes is detected, recognized and the result is added to the list on the right.</p>

<p>Handwritten character recognition is not a complex problem, so I decided to make it more
difficult including that the text can be in any direction and that it must run at a decent speed on a 
NVIDIA Jetson.</p>

<p>This is the result:</p>

<p><img src="/assets/img/posts/belt.gif" alt="Conveyor belt" /></p>

<p>It runs at real time 30fps and when it detects a pice of text it runs at 7fps. Still smooth enough.</p>

<p>The data has been manually collected and labeled. 
There were few examples, so this also adds up in the global difficulty of the project.</p>

<h3 id="methodology">Methodology</h3>

<p>This is a 2-step process:</p>

<ul>
  <li>Detect text in the image, crop and rotate</li>
  <li>Apply character recognition to the result of the first step</li>
</ul>

<h3 id="motivation">Motivation</h3>

<p>In this demo I wanted to support any alphanumeric character (plus hyphen) in any direction (up, right, down and left).
At first I wanted to solve this problem with a single model, but soon I realised that it is too complex.</p>

<p>If you have one class for each character in any direction you end up with many classes, around 150.</p>

<p>So I decided to split the detection of the text and the character in two different models.
The first one will carry text detection. When it detects some text in the image, it will crop around it 
and it will rotate to the up position.</p>

<p>Once the text has been cropped and rotated, the second model will carry over and perform character recognition.</p>

<h3 id="first-model-text-detection">First Model: Text Detection</h3>

<p>The first task is to detect text. This is a classic object detection problem with 4 classes: up, right, down and left.</p>

<p>At first it seemed quite easy, so I decided to apply one of the fastest architectures in terms of inference time: <strong>YOLOv3 tiny</strong>.</p>

<p>I have a lot of experience with YOLOv3 tiny and the results were very good from the very beginning. 
I tried to keep the resolution as low as possible and endeup with a input image size of 288x160 pixels.</p>

<p>A couple of examples:</p>

<p><img src="/assets/img/posts/belt_conveyor/belt_text1.png" alt="Conveyor belt text detection ex1" /></p>

<p><img src="/assets/img/posts/belt_conveyor/belt_text2.png" alt="Conveyor belt text detection ex2" /></p>

<p>It is a very fast model, it runs at 30fps on this hardware 
so I was happy with the result and moved to the next subproblem; <strong>character recognition</strong>.</p>

<h3 id="second-model-character-recognition">Second Model: Character Recognition</h3>

<p>This is a much harder problem. 
I tried to apply the same architecture as in the previous step, but it didn’t work so well.</p>

<p>So I decided to apply a bigger network: <strong>YOLOv3</strong>. As it is a bigger network, it can understand more variations of 
the characters so it can generalize much better.</p>

<p>After working on the parameter tunning, I got a very good model.</p>

<p>One of the key parameters was the input <strong>image size</strong>. Inference time is very important in this project because we have 
very limited resources. We had 16:9 images, so it was key not to add padding to the images 
(this could increase inference time by 30%). It was also very important to keep a low resolution. 
I got a working model with high accuracy and then iterated until I reached a good accuracy at the smallest resolution.
In that case the final input image size was 384x192 pixels.</p>

<p>A couple of examples:</p>

<p><img src="/assets/img/posts/belt_conveyor/belt_char1.png" alt="Conveyor belt character recognition ex1" /></p>

<p><img src="/assets/img/posts/belt_conveyor/belt_char2.png" alt="Conveyor belt character recognition ex2" /></p>

<p>As expected, this model is slower than the text detection one.
In order to improve inference time, I skip some frames, I don’t perform character 
recognition of every frame detected. This could have been achieved increasing the batch size with similar results.</p>

<h3 id="additional-information">Additional Information</h3>

<p>Additionally to the deep learning models I also developed the desktop application.
The application was made in <code class="language-plaintext highlighter-rouge">Python</code> using <code class="language-plaintext highlighter-rouge">tkinter</code> library.</p>

<p>The Robot arm is a <a href="https://www.dobot.cc/dobot-magician/product-overview.html">Magician Dobot</a> and it is controlled using the Python API provided by the vendor.</p>

<p>The camera is a simple logitech webcam.</p>

<p>Everything runs on a NVIDIA Jetson TX2.</p>

<p>The models were trained using <a href="https://github.com/AlexeyAB/darknet">AlexeyAB’s darknet repository</a>.</p>

<p>I also tried to run those models on <code class="language-plaintext highlighter-rouge">TensorRT</code> and I succeded. But because of time constraints I decided to 
implement the whole program in <code class="language-plaintext highlighter-rouge">Python</code>.</p>

<p>If you have questions regarding this project, don’t hesitate to contact me!</p>
</p>
  </div>
</div>


            </p>
            
              <p class="card-text"><small class="text-muted">This page was last updated at 2021-06-15 16:38.</small></p>
            
          </div>
      </div>
      
    </div>
    <div class="navbar navbar-default navbar-fixed-bottom">
  <div class="container">
    <p class="navbar-text pull-left">© 2020 - Theme Built By Tyler Butler, See it on
        <a href="https://github.com/tcbutler320/Jekyll-Theme-Dumbarton" target="_blank" >GitHub</a>
    </p>
    <p class="navbar-text pull-right">
            <!-- Displays Social Media Icons based on _config.yml settings -->

<span style="color: Black;">
     
    
        <a href="https://github.com/josecyn">
        <span style="color: black;">
            <i class="fab fa-github-square fa-lg"></i></a>
        </span>
    
    
        <a href="https://www.linkedin.com/in/josecarlosyn">
        <span style="color: black;">
            <i class="fab fa-linkedin fa-lg"></i></a>
        </span>
    
    
    
    
     
    <i> &nbsp;&nbsp; </i>
</span>

    </p>
  </div>
</div> 

<script>
  $(function () {
    $('[data-toggle="popover"]').popover()
  })
</script>
  </body>
</html>